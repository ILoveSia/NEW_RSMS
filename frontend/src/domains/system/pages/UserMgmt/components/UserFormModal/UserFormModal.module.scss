/**
 * 사용자 폼 모달 스타일
 *
 * @description PositionFormModal 표준 템플릿 기반 스타일링
 * @author Claude AI
 * @version 1.0.0
 * @created 2025-09-24
 */

@import '@/styles/variables';
@import '@/styles/mixins';

// ===============================
// Modal Container
// ===============================

.modalPaper {
  border-radius: $border-radius-lg;
  overflow: hidden;
}

.modalTitle {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: $spacing-md $spacing-lg;
  background: var(--theme-page-header-bg, $color-primary);
  color: var(--theme-page-header-text, white);
  margin: 0;

  h6 {
    margin: 0;
    font-weight: 600;
    color: white;
  }

  button {
    color: rgba(255, 255, 255, 0.8);

    &:hover {
      color: white;
      background: rgba(255, 255, 255, 0.1);
    }
  }
}

.modalContent {
  padding: $spacing-lg;
  max-height: 70vh;
  overflow-y: auto;
}

.modalActions {
  padding: $spacing-sm $spacing-lg $spacing-lg;
  border-top: 1px solid $color-border-light;
  gap: $spacing-sm;

  button {
    min-width: 80px;
  }
}

// ===============================
// Form Sections
// ===============================

.formSection {
  margin-bottom: $spacing-md;

  .MuiTextField-root {
    .MuiInputLabel-root {
      font-size: 0.875rem;
      color: var(--theme-text-secondary, $color-text-secondary);

      &.Mui-required {
        color: var(--theme-error, $color-error);
      }
    }

    .MuiOutlinedInput-root {
      font-size: 0.875rem;

      &:hover .MuiOutlinedInput-notchedOutline {
        border-color: var(--theme-primary, $color-primary);
      }

      &.Mui-focused .MuiOutlinedInput-notchedOutline {
        border-color: var(--theme-primary, $color-primary);
      }
    }
  }

  .MuiFormControlLabel-root {
    .MuiFormControlLabel-label {
      font-size: 0.875rem;
      color: var(--theme-text-primary, $color-text-primary);
    }

    .MuiCheckbox-root {
      color: var(--theme-primary, $color-primary);

      &.Mui-checked {
        color: var(--theme-primary, $color-primary);
      }
    }
  }
}

.divider {
  margin: $spacing-lg 0;
  border-color: $color-border-light;
}

// ===============================
// Role Assignment Section
// ===============================

.roleSection {
  .MuiTypography-subtitle2 {
    font-weight: 600;
    color: var(--theme-text-primary, $color-text-primary);
    margin-bottom: $spacing-sm;
  }
}

.roleGrid {
  border: 1px solid $color-border-light;
  border-radius: $border-radius-md;
  overflow: hidden;

  // AG-Grid 내부 스타일 커스터마이징
  :global {
    .ag-theme-alpine {
      --ag-header-background-color: var(--theme-background-paper, #{$color-background-paper});
      --ag-header-foreground-color: var(--theme-text-primary, #{$color-text-primary});
      --ag-border-color: #{$color-border-light};
      --ag-row-hover-color: var(--theme-hover, rgba(0, 0, 0, 0.04));

      .ag-header-cell {
        font-weight: 600;
        font-size: 0.8rem;
      }

      .ag-cell {
        font-size: 0.8rem;
        display: flex;
        align-items: center;
      }

      .ag-row {
        cursor: pointer;

        &:hover {
          background: var(--theme-hover, rgba(0, 0, 0, 0.04));
        }
      }

      // 체크박스 스타일
      input[type="checkbox"] {
        cursor: pointer;
        transform: scale(0.9);
      }
    }
  }
}

// ===============================
// Responsive Design
// ===============================

@include responsive-breakpoint($breakpoint-tablet) {
  .modalTitle {
    padding: $spacing-sm $spacing-md;

    h6 {
      font-size: 1rem;
    }
  }

  .modalContent {
    padding: $spacing-md;
    max-height: 60vh;
  }

  .modalActions {
    padding: $spacing-sm $spacing-md;
    flex-direction: column-reverse;

    button {
      width: 100%;
      margin: 0;
    }
  }

  .roleSection {
    .MuiGrid-container {
      flex-direction: column;
    }

    .roleGrid {
      margin-bottom: $spacing-md;
    }
  }
}

@include responsive-breakpoint($breakpoint-mobile) {
  .modalTitle {
    flex-direction: column;
    gap: $spacing-xs;
    text-align: center;

    button {
      position: absolute;
      top: $spacing-xs;
      right: $spacing-xs;
    }
  }

  .formSection {
    .MuiGrid-container {
      .MuiGrid-item {
        padding: $spacing-xs;
      }
    }
  }

  .roleGrid {
    height: 150px;
  }
}

// ===============================
// Animation
// ===============================

.modalPaper {
  transition: transform 0.3s ease-out;
}

.formSection {
  .MuiTextField-root {
    transition: all 0.2s ease;

    &:focus-within {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
  }
}

// ===============================
// Accessibility
// ===============================

.modalTitle {
  [role="button"] {
    border-radius: 50%;
    transition: background 0.2s ease;

    &:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.5);
      outline-offset: 2px;
    }
  }
}

.modalActions {
  button {
    &:focus-visible {
      outline: 2px solid var(--theme-primary, $color-primary);
      outline-offset: 2px;
    }
  }
}

// ===============================
// Error States
// ===============================

.formSection {
  .MuiTextField-root {
    &.Mui-error {
      .MuiOutlinedInput-root {
        .MuiOutlinedInput-notchedOutline {
          border-color: var(--theme-error, $color-error);
        }
      }

      .MuiFormHelperText-root {
        color: var(--theme-error, $color-error);
        font-size: 0.75rem;
      }
    }
  }
}